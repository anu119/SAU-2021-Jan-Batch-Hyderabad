-- product table creation
create table PRODUCT(
PCODE VARCHAR(5) NOT NULL, 
PNAME VARCHAR(50) NOT NULL, 
UNIT_PRICE DECIMAL NOT NULL, 
CCODE VARCHAR(5) NOT NULL, 
primary key(PCODE));

-- category table creation
create table CATEGORY(
CCODE VARCHAR(5) NOT NULL, 
CNAME VARCHAR(50) NOT NULL, 
primary key(CCODE));

-- customer creation
create table CUSTOMER(
CID VARCHAR(5) NOT NULL, 
CNAME VARCHAR(50) NOT NULL, 
DOB DATE NOT NULL, 
GENDER CHAR(1) NOT NULL, 
MOB_NO VARCHAR(12) NOT NULL, 
LCODE VARCHAR(5) NOT NULL, 
primary key(CID),  
CONSTRAINT CHECK(GENDER IN ('M', 'F', 'O')));

-- location table creation
create table LOCATION(
LCODE VARCHAR(5) NOT NULL, 
LNAME VARCHAR(50) NOT NULL, 
primary key(LCODE));

-- sales executive table creation
create table SALES_EXECUTIVE(
SID VARCHAR(5) NOT NULL,
SNAME VARCHAR(50) NOT NULL, 
DOB DATE NOT NULL, 
GENDER CHAR(1) NOT NULL, 
MOB_NO VARCHAR(12) NOT NULL, 
primary key(SID),  
constraint CHECK (GENDER IN ('M', 'F', 'O')));


-- sales_category creation
CREATE TABLE SE_CATEGORY(
SID VARCHAR(5) NOT NULL,
CCODE VARCHAR(5) NOT NULL
);

-- order creation
CREATE TABLE ORDER_T(
ORDER_ID VARCHAR(5) NOT NULL,
CID  VARCHAR(5) NOT NULL,
SID   VARCHAR(5) NOT NULL,
DOP DATE NOT NULL,
PRIMARY KEY(ORDER_ID)
);


-- order poduct creation
CREATE TABLE ORDER_PRODUCT(
	PCODE VARCHAR(5) NOT NULL,
    ORDER_ID VARCHAR(5) NOT NULL,
    UNITS INT NOT NULL,
    PRIMARY KEY(PCODE, ORDER_ID)
);

-- adding foeign keys constraints
ALTER TABLE PRODUCT ADD FOREIGN KEY (CCODE) REFERENCES CATEGORY(CCODE);
ALTER TABLE SE_CATEGORY ADD FOREIGN KEY (CCODE) REFERENCES CATEGORY(CCODE);
ALTER TABLE SE_CATEGORY ADD FOREIGN KEY (SID) REFERENCES SALES_EXECUTIVE(SID);
ALTER TABLE CUSTOMER ADD FOREIGN KEY (LCODE) REFERENCES LOCATION(LCODE);
ALTER TABLE ORDER_T ADD FOREIGN KEY(SID) REFERENCES SALES_EXECUTIVE(SID);
ALTER TABLE ORDER_T ADD FOREIGN KEY(CID) REFERENCES CUSTOMER(CID);
ALTER TABLE ORDER_PRODUCT ADD FOREIGN KEY(PCODE) REFERENCES PRODUCT(PCODE);
ALTER TABLE ORDER_PRODUCT ADD FOREIGN KEY(ORDER_ID) REFERENCES ORDER_T(ORDER_ID);